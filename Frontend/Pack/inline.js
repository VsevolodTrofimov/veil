
    console.log('veil shall preveil')
    const scr = document.createElement('script')
    console.log(scr)
    scr.textContent =`var veil=function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwatchPost=t.watchPost=t.parseComment=t.parseReplyLink=t.$getCommentsByPostId=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),o=t.$getCommentsByPostId=function(e){var t=document.querySelectorAll("#replies"+e+" > .reply");return Array.from(t)},i=t.parseReplyLink=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.getAttribute("onclick").split("return wall.showReply(")[1].split(")")[0].split(",")[2].trim(),r=n.substring(1,n.length-1),o=document.querySelector('[data-post-id="'+r+'"]');return o?c(o,t):{commentId:-1}},a=function(e){return e=e.replace(/(<br\\s*\\/?>)/g," "),e=e.replace(/<[^>]*>/g,"")},c=t.parseComment=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=e.getAttribute("data-post-id"),r=e.querySelector("a.author").getAttribute("data-from-id"),o=Array.from(e.querySelectorAll("a.reply_to")).map(function(e){return i(e).commentId});return{commentId:n,authorId:r,postId:t,text:a(e.querySelector(".wall_reply_text").innerHTML),mentions:o}};t.default=c;var l=[],u=0;t.watchPost=function(e,t){var n={postId:e,cb:t,oldComments:[],watcherId:u++};return-1===l.indexOf(e)&&(l.push(n),n)},t.unwatchPost=function(e){for(var t=0;t<l.length;t++)return l[t].watcherId===e&&l.splice(t,1),!0;return!1};r.add(function(){l.forEach(function(e){console.log(l);try{o(e.postId).forEach(function(t){var n=c(t,e.postId);-1===e.oldComments.indexOf(n.commentId)&&(e.oldComments.push(n.commentId),e.cb(n))})}catch(e){console.error(e)}})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=0,o=[],i=(t.add=function(e){var t={id:r++,exec:e};return o.push(t),t},t.remove=function(e){for(var t=0;t<o.length;t++)return o[t].id===e&&o.splice(t,1),!0;return!1},function(){console.log("spied"),o.forEach(function(e){return e.exec()})}),a=function(e){if(e&&e.getAttribute){var t=e.getAttribute("id");t&&"replies_side"===t.substring(0,12)&&i()}},c=window.show;window.show=function(){a.apply(void 0,arguments),c.apply(void 0,arguments)};var l=setInterval(function(){window.wall&&(clearInterval(l),console.log("wall spy set"),window.wall.vkshowReplies=wall.showReplies,window.wall.showReplies=function(){var e;return i(),(e=window.wall).vkshowReplies.apply(e,arguments)})},100),u=setInterval(function(){window.WkView&&(clearInterval(u),console.log("set WkView spy"),window.WkView.vkarrows=window.WkView.updateArrows,window.WkView.updateArrows=function(){var e;return i(),(e=WkView).vkarrows.apply(e,arguments)})},100)},function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}o(n(3));var i=r(n(4)),a=r(n(0)),c=(r(n(5)),o(n(6)));e.exports={veil:i,comments:a,inject:c.default}},function(e,t,n){"use strict";function r(e,t){return new Function(e,t)}class o{static stringify(e){return JSON.stringify(e,function(e,t){return"function"==typeof t?t.toString():t})}static parse(e){return JSON.parse(e,function(e,t){if(t&&"string"==typeof t&&0===t.indexOf("function")){var n={args:{from:t.indexOf("(")+1,to:t.indexOf(")")},body:{from:t.indexOf("{")+1,to:t.lastIndexOf("}")}};return r(t.substring(n.args.from,n.args.to),t.substring(n.body.from,n.body.to))}if(t&&"string"==typeof t&&t.match(/=>\\s*{/)){let[e,n]=t.split(/=>\\s*{\\s*(.*)\\s*}\\s*$/);return e=e.replace("(","").replace(")",""),r(e,n)}return t})}}e.exports=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwatchPost=t.watchPost=t.veil=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),o=n(0),i=t.veil=function e(t,n){var r=(0,o.$getCommentsByPostId)(t),i=document.querySelector('[data-post-id="'+t+'"] .wr_header');i&&(console.log("set listener"),i.addEventListener("click",function(){console.log("reacted"),setTimeout(function(){return e(t,n)},200)})),r.forEach(function(e){if(null!==e){var r=(0,o.parseComment)(e,t),i=r.authorId;-1!==n.indexOf(i)&&(console.log("removed comment",r.commentId),e.remove())}})};t.default=i;var a=[],c=0,l=(t.watchPost=function(e,t){var n={postId:e,userIds:t,watcherId:c++};return i(e,t),a.push(n),n},t.unwatchPost=function(e){for(var t=0;t<a.length;t++)return a[t].watcherId===e&&a.splice(t,1),!0;return!1});r.add(function(){a.forEach(function(e){try{i(e.postId,e.userIds)}catch(t){console.error(t),l(e.watcherId)}})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.remove=t.add=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),o=0,i=[],a=t.add=function(e){var t={id:o++,exec:e};return i.push(t),t},c=(t.remove=function(e){for(var t=0;t<i.length;t++)return i[t].id===e&&i.splice(t,1),!0;return!1},setInterval(function(){if(window.wall){clearInterval(c),console.log("wall engagement spy set");var e=wall.sendReply;wall.sendReply=function(){var t=arguments;return i.forEach(function(e){return e.exec(t[0])}),e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))}}},100));a(function(e){console.log("engaged"),r.watchPost(e,console.warn)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={clickbait:{text:["Достали тролли?"],actions:[{text:"Ага!",goto:"resist"},{text:"Игнорю их и не парюсь",goto:"im good"}]},"im good":{text:["Так держать! Но не забывай помогать тем, кто трепетнее к этому отностится"],actions:[]}},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bot",n=document.createElement("div");return n.textContent=e,n.style.padding="15px",n.style.marginBottom="20px",n.style.border="1px solid #eee","player"===t?(n.style.alignSelf="flex-end",n.style.background="#edf0f5"):n.style.alignSelf="flex-start",n},i=function(e,t){var n=document.createElement("button");return n.classList.add("flat_button"),n.style.marginRight="15px",n.textContent=t.text,n.addEventListener("click",function(){return l(e,t)}),n},a=function(e,t){e.$actionbox.innerHTML="",t.forEach(function(t){e.$actionbox.appendChild(i(e,t))})},c=function(e,t){e.map[t].text.forEach(function(t){e.$chatbox.appendChild(o(t))}),a(e,e.map[t].actions)},l=function(e,t){e.$chatbox.appendChild(o(t.text,"player")),c(e,t.goto)},u=function(e,t){return{map:e,$chatbox:t.querySelector(".chat"),$actionbox:t.querySelector(".actions")}},s=function(){var e=document.createElement("div");return e.innerHTML='<div style="\\n                        width: 100%;\\n                        height: 400px;\\n                        display: flex;\\n                        flex-direction: column;\\n                        justify-content: flex-end;\\n                        border-radius: 4px;"\\n                      >\\n                        <div class=\\'chat\\' style="display:flex; flex-direction: column; justify-content: flex-start; padding: 0 15px;"> </div>\\n                        <div class=\\'actions submit_post\\' style="display:flex; felx-direction: row; flex-wrap: wrap;"> </div>\\n                      </div>',e},d=function(){var e=document.createElement("div");return e.classList.add("feed_row"),e.innerHTML="\\n        <div class='_post post page_block'>\\n            <div class='post_header' style='min-height: 0'></div>\\n        </div>",e};t.default=function(){var e=document.getElementById("feed_rows"),t=d(),n=s();t.querySelector(".post").appendChild(n);var o=u(r,n);c(o,"clickbait");e.insertBefore(t,e.children[8])}}]);`
    document.body.appendChild(scr)
