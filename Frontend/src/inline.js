
    console.log('veil shall preveil')
    const scr = document.createElement('script')
    console.log(scr)
    scr.textContent =`var veil=function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwatchPost=t.watchPost=t.parseComment=t.parseReplyLink=t.$getCommentsByPostId=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(1)),o=t.$getCommentsByPostId=function(e){var t=document.querySelectorAll("#replies"+e+" > .reply");return Array.from(t)},i=t.parseReplyLink=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=e.getAttribute("onclick").split("return wall.showReply(")[1].split(")")[0].split(",")[2].trim(),n=r.substring(1,r.length-1),o=document.querySelector('[data-post-id="'+n+'"]');return o?l(o,t):{commentId:-1}},u=function(e){return e=e.replace(/(<br\\s*\\/?>)/g," "),e=e.replace(/<[^>]*>/g,"")},l=t.parseComment=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=e.getAttribute("data-post-id"),n=e.querySelector("a.author").getAttribute("data-from-id"),o=Array.from(e.querySelectorAll("a.reply_to")).map(function(e){return i(e).commentId});return{commentId:r,authorId:n,postId:t,text:u(e.querySelector(".wall_reply_text").innerHTML),mentions:o}};t.default=l;var a=[],c=0;t.watchPost=function(e,t){var r={postId:e,cb:t,oldComments:[],watcherId:c++};return-1===a.indexOf(e)&&(a.push(r),r)},t.unwatchPost=function(e){for(var t=0;t<a.length;t++)return a[t].watcherId===e&&a.splice(t,1),!0;return!1};n.add(function(){a.forEach(function(e){console.log(a);try{o(e.postId).forEach(function(t){var r=l(t,e.postId);-1===e.oldComments.indexOf(r.commentId)&&(e.oldComments.push(r.commentId),e.cb(r))})}catch(e){console.error(e)}})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=0,o=[],i=(t.add=function(e){var t={id:n++,exec:e};return o.push(t),t},t.remove=function(e){for(var t=0;t<o.length;t++)return o[t].id===e&&o.splice(t,1),!0;return!1},function(){console.log("spied"),o.forEach(function(e){return e.exec()})}),u=function(e){if(e&&e.getAttribute){var t=e.getAttribute("id");t&&"replies_side"===t.substring(0,12)&&i()}},l=window.show;window.show=function(){u.apply(void 0,arguments),l.apply(void 0,arguments)};var a=setInterval(function(){window.wall&&(clearInterval(a),console.log("wall spy set"),window.wall.vkshowReplies=wall.showReplies,window.wall.showReplies=function(){var e;return i(),(e=window.wall).vkshowReplies.apply(e,arguments)})},100),c=setInterval(function(){window.WkView&&(clearInterval(c),console.log("set WkView spy"),window.WkView.vkarrows=window.WkView.updateArrows,window.WkView.updateArrows=function(){var e;return i(),(e=WkView).vkarrows.apply(e,arguments)})},100)},function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}!function(e){e&&e.__esModule}(r(3));var o=n(r(4)),i=n(r(0));n(r(5));e.exports={veil:o,comments:i}},function(e,t,r){"use strict";function n(e,t){return new Function(e,t)}class o{static stringify(e){return JSON.stringify(e,function(e,t){return"function"==typeof t?t.toString():t})}static parse(e){return JSON.parse(e,function(e,t){if(t&&"string"==typeof t&&0===t.indexOf("function")){var r={args:{from:t.indexOf("(")+1,to:t.indexOf(")")},body:{from:t.indexOf("{")+1,to:t.lastIndexOf("}")}};return n(t.substring(r.args.from,r.args.to),t.substring(r.body.from,r.body.to))}if(t&&"string"==typeof t&&t.match(/=>\\s*{/)){let[e,r]=t.split(/=>\\s*{\\s*(.*)\\s*}\\s*$/);return e=e.replace("(","").replace(")",""),n(e,r)}return t})}}e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unwatchPost=t.watchPost=t.veil=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(1)),o=r(0),i=t.veil=function e(t,r){var n=(0,o.$getCommentsByPostId)(t),i=document.querySelector('[data-post-id="'+t+'"] .wr_header');i&&(console.log("set listener"),i.addEventListener("click",function(){console.log("reacted"),setTimeout(function(){return e(t,r)},200)})),n.forEach(function(e){if(null!==e){var n=(0,o.parseComment)(e,t),i=n.authorId;-1!==r.indexOf(i)&&(console.log("removed comment",n.commentId),e.remove())}})};t.default=i;var u=[],l=0,a=(t.watchPost=function(e,t){var r={postId:e,userIds:t,watcherId:l++};return i(e,t),u.push(r),r},t.unwatchPost=function(e){for(var t=0;t<u.length;t++)return u[t].watcherId===e&&u.splice(t,1),!0;return!1});n.add(function(){u.forEach(function(e){try{i(e.postId,e.userIds)}catch(t){console.error(t),a(e.watcherId)}})})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.remove=t.add=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(r(0)),o=0,i=[],u=t.add=function(e){var t={id:o++,exec:e};return i.push(t),t},l=(t.remove=function(e){for(var t=0;t<i.length;t++)return i[t].id===e&&i.splice(t,1),!0;return!1},setInterval(function(){if(console.log(window.wall),window.wall){clearInterval(l),console.log("wall engagement spy set");var e=wall.sendReply;wall.sendReply=function(){var t=arguments;return i.forEach(function(e){return e.exec(t[0])}),e.call.apply(e,[this].concat(Array.prototype.slice.call(arguments)))}}},100));u(function(e){console.log("engaged"),n.watchPost(e,console.warn)})}]);`
    document.body.appendChild(scr)
